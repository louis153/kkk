<?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
    <mapper namespace="com.tengcai.vims.entity.sporttery.T_LOTO_EN">
    <select id = "selectRemEN" resultType="T_LOTO_E" parameterType="T_LOTO_E">
    select e.issue,e.match_mode,e.game_name,e.starttime,e.endtime,e.home_team_name,e.guest_team_name,e.home_team_id,
e.guest_team_id,e.home_full_result,e.guest_full_result,e.cg_mnl,e.init_h,e.init_a,e.mnl,e.mnl_h,e.mnl_a,e.status,
e.leaguename,e.available,e.is_recommend,e.is_hot,m.img_name,e.mnl_bet from t_loto_en e
left join t_game t on e.game_name=t.game_name 
left join t_imagemap m on t.pic_id=m.pro_id
where e.endtime > DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s')
  and e.mnl_bet=1
  and (e.is_hot=1 or e.is_recommend=1)
order by e.is_hot desc,e.is_recommend DESC,e.endtime aSC
LIMIT 0,1 
    </select>
	<select id = "selectT_LOTO_ENList" resultType="T_LOTO_E" parameterType="T_LOTO_E">
		SELECT e.issue,e.match_mode,e.game_name,e.starttime,e.endtime,e.home_team_name,e.guest_team_name,e.home_team_id,
e.guest_team_id,e.home_full_result,e.guest_full_result,e.cg_mnl,e.init_h,e.init_a,e.mnl,e.mnl_h,e.mnl_a,e.status,
e.leaguename,e.available,e.is_recommend,e.is_hot,m.img_name,e.mnl_bet from t_loto_en e
left join t_game t on e.game_name=t.game_name 
left join t_imagemap m on t.pic_id=m.pro_id
        <where>
<if test="issue != null">
 and e.issue=#{issue}
</if>
<if test="startIssue != null">
  <![CDATA[ and endtime>#{startIssue}]]>
</if>
<if test="endIssue != null">
  <![CDATA[ and endtime<#{endIssue}]]>
</if>
<if test="match_mode != null">
 and e.match_mode = #{match_mode}
</if>
<if test="game_name != null">
 and e.game_name = #{game_name}
</if>
<if test="starttime != null">
 and e.starttime = #{starttime}
</if>
<if test="endtime != null">
 and e.endtime > #{endtime}
</if>
<if test="home_team_name != null">
 and e.home_team_name = #{home_team_name}
</if>
<if test="guest_team_name != null">
 and e.guest_team_name = #{guest_team_name}
</if>
<if test="home_team_id != null">
 and e.home_team_id = #{home_team_id}
</if>
<if test="guest_team_id != null">
 and e.guest_team_id = #{guest_team_id}
</if>
<if test="home_full_result != null">
 and home_full_result = #{home_full_result}
</if>
<if test="guest_full_result != null">
 and guest_full_result = #{guest_full_result}
</if>
<if test="cg_mnl != null">
 and cg_mnl = #{cg_mnl}
</if>
<if test="init_h != null">
 and init_h = #{init_h}
</if>
<if test="init_a != null">
 and init_a = #{init_a}
</if>
<if test="mnl != null">
 and mnl = #{mnl}
</if>
<if test="mnl_h != null">
 and mnl_h = #{mnl_h}
</if>
<if test="mnl_a != null">
 and mnl_a = #{mnl_a}
</if>
<if test="mnl_bet != null">
 and mnl_bet = #{mnl_bet}
</if>
<if test="status != null">
 and status=#{status}
</if>
<if test="leaguename != null">
 and leaguename = #{leaguename}
</if>
<if test="available != null">
 and available=#{available}
</if>
<if test="is_recommend != null">
 and is_recommend=#{is_recommend}
</if>
<if test="is_hot != null">
 and is_hot=#{is_hot}
</if>
and available=1
</where>
order by endtime

        <if test = "row_start != null and page_size != null" >
        limit ${row_start},${page_size}
        </if>
    </select>
    <select id = "selectT_LOTO_ENCount" resultType="int" parameterType="T_LOTO_E">
		SELECT count(*) from t_loto_en
        <where>
<if test="issue != null">
 and issue=#{issue}
</if>
<if test="startIssue != null">
  <![CDATA[ and issue>#{startIssue}]]>
</if>
<if test="endIssue != null">
  <![CDATA[ and issue<#{endIssue}]]>
</if>
<if test="match_mode != null">
 and match_mode = #{match_mode}
</if>
<if test="game_name != null">
 and game_name = #{game_name}
</if>
<if test="starttime != null">
 and starttime = #{starttime}
</if>
<if test="endtime != null">
 and endtime = #{endtime}
</if>
<if test="home_team_name != null">
 and home_team_name = #{home_team_name}
</if>
<if test="guest_team_name != null">
 and guest_team_name = #{guest_team_name}
</if>
<if test="home_team_id != null">
 and home_team_id = #{home_team_id}
</if>
<if test="guest_team_id != null">
 and guest_team_id = #{guest_team_id}
</if>
<if test="home_full_result != null">
 and home_full_result = #{home_full_result}
</if>
<if test="guest_full_result != null">
 and guest_full_result = #{guest_full_result}
</if>
<if test="cg_mnl != null">
 and cg_mnl = #{cg_mnl}
</if>
<if test="init_h != null">
 and init_h = #{init_h}
</if>
<if test="init_a != null">
 and init_a = #{init_a}
</if>
<if test="mnl != null">
 and mnl = #{mnl}
</if>
<if test="mnl_h != null">
 and mnl_h = #{mnl_h}
</if>
<if test="mnl_a != null">
 and mnl_a = #{mnl_a}
</if>
<if test="status != null">
 and status=#{status}
</if>
<if test="leaguename != null">
 and leaguename = #{leaguename}
</if>
<if test="available != null">
 and available=#{available}
</if>
<if test="is_recommend != null">
 and is_recommend=#{is_recommend}
</if>
<if test="is_hot != null">
 and is_hot=#{is_hot}
</if>
</where>
order by issue
       
    </select>
    <insert id="save" parameterType="T_LOTO_E">
    <![CDATA[
        INSERT INTO t_loto_en(issue,match_mode,game_name,starttime,endtime,home_team_name,guest_team_name,home_team_id,guest_team_id,home_full_result,guest_full_result,cg_mnl,init_h,init_a,mnl,mnl_h,mnl_a,status,leaguename,available,is_recommend,is_hot,mnl_bet)
VALUES(#{issue},#{match_mode},#{game_name},#{starttime},#{endtime},#{home_team_name},#{guest_team_name},#{home_team_id},#{guest_team_id},#{home_full_result},#{guest_full_result},#{cg_mnl},#{init_h},#{init_a},#{mnl},#{mnl_h},#{mnl_a},#{status},#{leaguename},#{available},#{is_recommend},#{is_hot},#{mnl_bet})
	]]>
    </insert>
    <insert id="saveList" parameterType="java.util.List">
    <![CDATA[
        INSERT INTO t_loto_en(issue,match_mode,game_name,starttime,endtime,home_team_name,guest_team_name,home_team_id,guest_team_id,home_full_result,guest_full_result,cg_mnl,init_h,init_a,mnl,mnl_h,mnl_a,status,leaguename,available,is_recommend,is_hot,mnl_bet)
VALUES
	]]>
    <foreach collection="list" item="v" index="index" separator=", " > 
        <![CDATA[(#{v.issue},#{v.match_mode},#{v.game_name},#{v.starttime},#{v.endtime},#{v.home_team_name},#{v.guest_team_name},#{v.home_team_id},#{v.guest_team_id},#{v.home_full_result},#{v.guest_full_result},#{v.cg_mnl},#{v.init_h},#{v.init_a},#{v.mnl},#{v.mnl_h},#{v.mnl_a},#{v.status},#{v.leaguename},#{v.available},#{v.is_recommend},#{v.is_hot},#{v.mnl_bet}) ]]>
    </foreach>
    </insert>
    <update id="update" parameterType="T_LOTO_E">
    <![CDATA[
        UPDATE t_loto_en set issue=#{issue},match_mode=#{match_mode},game_name=#{game_name},starttime=#{starttime},endtime=#{endtime},home_team_name=#{home_team_name},guest_team_name=#{guest_team_name},home_team_id=#{home_team_id},guest_team_id=#{guest_team_id},home_full_result=#{home_full_result},guest_full_result=#{guest_full_result},cg_mnl=#{cg_mnl},init_h=#{init_h},init_a=#{init_a},mnl=#{mnl},mnl_h=#{mnl_h},mnl_a=#{mnl_a},status=#{status},leaguename=#{leaguename},available=#{available},is_recommend=#{is_recommend},is_hot=#{is_hot},mnl_bet=#{mnl_bet}
		WHERE  issue=#{issue} 
	]]>
    </update>
    <insert id="updateList" parameterType="java.util.List">
    <![CDATA[
        REPLACE INTO t_loto_en(issue,match_mode,game_name,starttime,endtime,home_team_name,guest_team_name,home_team_id,guest_team_id,home_full_result,guest_full_result,cg_mnl,init_h,init_a,mnl,mnl_h,mnl_a,status,leaguename,available,is_recommend,is_hot,mnl_bet)
    VALUES
	]]>
    <foreach collection="list" item="v" index="index" separator=", " > 
        <![CDATA[(#{v.issue},#{v.match_mode},#{v.game_name},#{v.starttime},#{v.endtime},#{v.home_team_name},#{v.guest_team_name},#{v.home_team_id},#{v.guest_team_id},#{v.home_full_result},#{v.guest_full_result},#{v.cg_mnl},#{v.init_h},#{v.init_a},#{v.mnl},#{v.mnl_h},#{v.mnl_a},#{v.status},#{v.leaguename},#{v.available},#{v.is_recommend},#{v.is_hot},#{v.mnl_bet}) ]]>
    </foreach>
    </insert>
    <delete id="delete" parameterType="T_LOTO_E">
    <![CDATA[
        DELETE FROM t_loto_en WHERE  issue=#{issue} 
	]]>
    </delete>    
</mapper > 